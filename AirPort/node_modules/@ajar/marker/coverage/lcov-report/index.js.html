<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for index.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="prettify.css" />
    <link rel="stylesheet" href="base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="index.html">All files</a> index.js
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">59.52% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>25/42</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">46.43% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>13/28</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">83.33% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>5/6</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">64.86% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>24/37</span>
      </div>
    </div>
  </div>
  <div class='status-line medium'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">16x</span>
<span class="cline-any cline-yes">16x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">16x</span>
<span class="cline-any cline-yes">16x</span>
<span class="cline-any cline-yes">16x</span>
<span class="cline-any cline-yes">16x</span>
<span class="cline-any cline-yes">16x</span>
<span class="cline-any cline-yes">16x</span>
<span class="cline-any cline-yes">16x</span>
<span class="cline-any cline-yes">16x</span>
<span class="cline-any cline-yes">16x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">18x</span>
<span class="cline-any cline-yes">16x</span>
<span class="cline-any cline-yes">16x</span>
<span class="cline-any cline-yes">16x</span>
<span class="cline-any cline-yes">16x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">16x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span></td><td class="text"><pre class="prettyprint lang-js">/**
 * @author Ajar &lt;yariv.gilad@gmail.com&gt; [https://timetocode.io, https://casaversa.com]
 * */
const {
    Hidden,
    Reset,
    Bold,
    NoColor,
    Red,
    Green,
    Blue,
    Yellow,
    Magenta,
    Cyan,
} = require('./constants');
&nbsp;
/**
 * @returns { string } - filename of the script using the logger
 */
function get_filename(){
    try {
        throw new Error();
    } catch (e) {
        const lines = e.stack.split('\n');
        let line = lines[4];
        <span class="missing-if-branch" title="if path not taken" >I</span>if(!line || (line &amp;&amp; line.includes('internal/modules/cjs')) || (line.includes('&lt;anonymous&gt;'))) <span class="cstat-no" title="statement not covered" >line = lines[3];</span>
        <span class="missing-if-branch" title="if path not taken" >I</span>if(!line) <span class="cstat-no" title="statement not covered" >return '&gt;&gt;';</span>
        const res = line.match(/([\w\d\-_.]*:\d+:\d+)/);
        <span class="missing-if-branch" title="if path not taken" >I</span>if(!res) <span class="cstat-no" title="statement not covered" >return '&gt;&gt;';</span>
        const [info] = res;
        const [file , line_num] = info.split(':');
         return `${file}[${line_num}]`
    }
}
/**
 * @param {string} color - one of the color hex constant values
 * @returns { Function } - args will be colored by the color you passed in.
 */
const log = color =&gt; (...args)=&gt;  {
    const hide = args[0] === Hidden || <span class="branch-1 cbranch-no" title="branch not covered" >args.length === 0;</span>
    const colored_msg = hide ? args.splice(0,2)[1] : <span class="branch-1 cbranch-no" title="branch not covered" >args.shift() </span>;
    let text = [`${color}${get_filename()}${Reset}: ${Bold}${color}${colored_msg}${Reset}`, ...args].join(' ');
    <span class="missing-if-branch" title="if path not taken" >I</span>if(!hide){
<span class="cstat-no" title="statement not covered" >        console.log(text);</span>
    }
    return text;
}
&nbsp;
const marker = {
    //by levels shorthand
    n :         log( NoColor ),    
    v :         log( Magenta ),    
    d :         log( Cyan ),       
    i :         log( Green ),      
    w :         log( Yellow ),     
    e :         log( Red ),       
    //by explicit levels  
    none:       log( NoColor ),    
    verbose:    log( Magenta ),    
    debug:      log( Cyan ),       
    info:       log( Green ),      
    warn:       log( Yellow ),     
    err:        log( Red ),       
    //by color names
    red:        log( Red ),       
    green:      log( Green ),     
    blue:       log( Blue ),      
    cyan:       log( Cyan ),      
    yellow:     log( Yellow ),  
    magenta:    log( Magenta ),   
    
    //some extras
    /**
     * @param { Object } obj - the Object to log 
     * @param { string } label - optional label 
     */
    obj:   (obj,label='object:')=&gt; {
&nbsp;
            <span class="missing-if-branch" title="else path not taken" >E</span>if(Object(obj) !== obj){//verify value is an object
                throw new Error('.obj() expects at least 1 object argument');
            }
            const actual_label = <span class="cstat-no" title="statement not covered" >log(Magenta)(label);</span>
<span class="cstat-no" title="statement not covered" >            console.dir(obj);</span>
<span class="cstat-no" title="statement not covered" >            return {actual_label}</span>
    },
    /**
     * @param { Error } err - an Error object to log
     */
    error: (err)=&gt; {
            <span class="missing-if-branch" title="else path not taken" >E</span>if(toString.call(err) !== '[object Error]'){
                throw new Error('.error() expects 1 Error argument');
            }
            const msg = <span class="cstat-no" title="statement not covered" >log(Red)('ERROR: ',err.message)</span>
            let odd = <span class="cstat-no" title="statement not covered" >true;</span>
            let stack = <span class="cstat-no" title="statement not covered" >err.stack? err.stack.split('\n') : [];</span>
            //exclude stack traces from node internals or node_modules
<span class="cstat-no" title="statement not covered" >            stack = stack.filter(<span class="fstat-no" title="function not covered" >li</span>ne=&gt; <span class="cstat-no" title="statement not covered" >!line.includes('node_modules/') &amp;&amp;</span></span>
                                        !line.includes('internal/modules/cjs') &amp;&amp;
                                        !line.includes('internal/bootstrap'));
<span class="cstat-no" title="statement not covered" >            for(let line of stack){</span>
<span class="cstat-no" title="statement not covered" >                odd = !odd</span>
                //keep it short
<span class="cstat-no" title="statement not covered" >                line = line.substr(line.lastIndexOf('\\') - 50);</span>
                //alternating row colors
<span class="cstat-no" title="statement not covered" >                odd? log(NoColor)(line)  : log(Blue)(line) </span>
            }
<span class="cstat-no" title="statement not covered" >            return {msg,stack}</span>
    }    
}
module.exports = marker;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="https://istanbul.js.org/" target="_blank">istanbul</a> at Sat Jan 12 2019 08:05:25 GMT+0200 (Israel Standard Time)
</div>
</div>
<script src="prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="sorter.js"></script>
</body>
</html>
